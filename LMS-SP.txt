USE[LMS]
GO
/****** Object:  StoredProcedure [dbo].[PUBLISHER_UPDATE]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[PUBLISHER_UPDATE]
@PID AS INT,
	@PNAME AS NVARCHAR(256)
AS
BEGIN


	SET NOCOUNT ON;

	UPDATE PUBLISHERMst SET PUBLISHER = @PNAME WHERE PID = @PID


END
GO
/****** Object:  StoredProcedure [dbo].[PUBLISHER_SELECT_BY_PNAME]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[PUBLISHER_SELECT_BY_PNAME]
@PNAME AS NVARCHAR(256)
AS
BEGIN


	SET NOCOUNT ON;

	SELECT* FROM PUBLISHERMst WHERE PUBLISHER=@PNAME
END
GO
/****** Object:  StoredProcedure [dbo].[PUBLISHER_SELECT_BY_PID]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[PUBLISHER_SELECT_BY_PID]
@PID AS INT
AS
BEGIN

	SET NOCOUNT ON;

SELECT* FROM PUBLISHERMst WHERE PID=@PID
END
GO
/****** Object:  StoredProcedure [dbo].[PUBLISHER_SELECT]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[PUBLISHER_SELECT]

AS
BEGIN


	SET NOCOUNT ON;

	SELECT* FROM PUBLISHERMst
END
GO
/****** Object:  StoredProcedure [dbo].[PUBLISHER_INSERT]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[PUBLISHER_INSERT]
@PNAME AS NVARCHAR(256)
AS
BEGIN


	SET NOCOUNT ON;

	INSERT INTO PUBLISHERMst VALUES(@PNAME, GETDATE())


END
GO
/****** Object:  StoredProcedure [dbo].[PUBLISHER_DELETE]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[PUBLISHER_DELETE]
@PID AS INT
AS
BEGIN

	SET NOCOUNT ON;

DELETE FROM PUBLISHERMst WHERE PID=@PID

END
GO
/****** Object:  StoredProcedure [dbo].[USER_UPDATE]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[USER_UPDATE]
@SID AS INT,
	@USERNAME AS NVARCHAR(256),
	@BRANCHNAME AS NVARCHAR(256),
	@MOBILE AS NVARCHAR(256),
	@ADD AS NVARCHAR(256),
	@CITY AS NVARCHAR(256),
	@PINCODE AS NVARCHAR(256)



AS
BEGIN


UPDATE USERMst SET USERName = @USERNAME, Email = @BRANCHNAME, Mobile = @MOBILE, Address = @ADD, City = @CITY, Pincode = @PINCODE  WHERE SID = @SID

END
GO
/****** Object:  StoredProcedure [dbo].[USER_SELECT_SEARCH]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROCEDURE[dbo].[USER_SELECT_SEARCH]
@name as nvarchar(256)
AS
BEGIN


	SET NOCOUNT ON;


	SELECT* FROM USERMst where USERName like @name
END
GO
/****** Object:  StoredProcedure [dbo].[USER_SELECT_RENT_BOOK]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[USER_SELECT_RENT_BOOK]

@STATUS AS INT
AS
BEGIN

	SET NOCOUNT ON;

SELECT distinct s.sid as SID,s.USERName as USERName FROM RentMst as r, USERMst as s where Status=@STATUS and s.SID=r.SID
END
GO
/****** Object:  StoredProcedure [dbo].[USER_SELECT_LOGIN]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROCEDURE[dbo].[USER_SELECT_LOGIN]
@EMAIL AS  NVARCHAR(256),
@pass as nvarchar(256)
AS
BEGIN


	SET NOCOUNT ON;


	SELECT* FROM USERMst WHERE Email=@EMAIL and Password=@pass
END
GO
/****** Object:  StoredProcedure [dbo].[USER_SELECT_BY_SID]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[USER_SELECT_BY_SID]
@SID AS INT
AS
BEGIN

	SET NOCOUNT ON;


SELECT* FROM USERMst WHERE SID=@SID
END
GO
/****** Object:  StoredProcedure [dbo].[USER_SELECT_BY_EMAIL]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[USER_SELECT_BY_EMAIL]
@EMAIL AS  NVARCHAR(256)
AS
BEGIN


	SET NOCOUNT ON;


	SELECT* FROM USERMst WHERE Email=@EMAIL
END
GO
/****** Object:  StoredProcedure [dbo].[USER_SELECT_BY_branch]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROCEDURE[dbo].[USER_SELECT_BY_branch]
@branch AS  NVARCHAR(256)
AS
BEGIN


	SET NOCOUNT ON;


	SELECT* FROM USERMst WHERE BranchName=@branch
END
GO
/****** Object:  StoredProcedure [dbo].[USER_SELECT]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[USER_SELECT]

AS
BEGIN


	SET NOCOUNT ON;


	SELECT* FROM USERMst
END
GO
/****** Object:  StoredProcedure [dbo].[USER_INSERT]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[USER_INSERT]
@USERNAME AS NVARCHAR(256),
	@BRANCHNAME AS NVARCHAR(256),
	@MOBILE AS NVARCHAR(256),
	@ADD AS NVARCHAR(256),
	@CITY AS NVARCHAR(256),
	@PINCODE AS NVARCHAR(256),
	@DOB AS DATETIME,
	@GENDER AS NVARCHAR(256),
	@EMAIL AS  NVARCHAR(256),
	@pass as nvarchar(256),
	@img as nvarchar(500)
AS
BEGIN


	SET NOCOUNT ON;


	INSERT INTO USERMst VALUES(@USERNAME, @BRANCHNAME , @MOBILE , @ADD , @CITY , @PINCODE , @DOB, @GENDER , @EMAIL, @pass, @img, GETDATE())
END
GO
/****** Object:  StoredProcedure [dbo].[USER_DELETE]    Script Date: 08/02/2017 14:07:12 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[USER_DELETE]
@SID AS INT
AS
BEGIN

	SET NOCOUNT ON;
DELETE FROM USERMst WHERE SID=@SID



END






/****** Object:  StoredProcedure [dbo].[ADMIN_SELECT]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[ADMIN_SELECT]


AS
BEGIN


	SET NOCOUNT ON;

  
	SELECT* FROM AdminMst

   END

GO
/****** Object:  StoredProcedure [dbo].[BOOK_UPDATE]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROCEDURE[dbo].[BOOK_UPDATE]
@bid as int,
  	@BNAME AS NVARCHAR(256),
	@AUTHOR AS NVARCHAR(256),
	@DETAIL AS NVARCHAR(256),
	@PRICE AS FLOAT ,
	@PUBLISHER AS NVARCHAR(256),
	@BRANCH AS NVARCHAR(256), 	
    @img as nvarchar(1000)
AS
BEGIN


 update BookMst set BookName = @BNAME, Author = @AUTHOR, Detail = @DETAIL, Price = @PRICE, PUBLISHER = @PUBLISHER, Branch = @BRANCH, Image = @img where BookID = @bid



END
GO
/****** Object:  StoredProcedure [dbo].[BOOK_SELECT_By_PUBLISHER]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[BOOK_SELECT_By_PUBLISHER]

@PUB AS NVARCHAR(200)
AS
BEGIN


	SET NOCOUNT ON;

	SELECT* FROM BookMst where PUBLISHER=@PUB
END
GO
/****** Object:  StoredProcedure [dbo].[BOOK_SELECT_By_BRANCH]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[BOOK_SELECT_By_BRANCH]

@BRANCH AS NVARCHAR(200)
AS
BEGIN


	SET NOCOUNT ON;

	SELECT* FROM BookMst where Branch=@BRANCH
END
GO
/****** Object:  StoredProcedure [dbo].[BOOK_SELECT_By_BNAME]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROCEDURE[dbo].[BOOK_SELECT_By_BNAME]

@BNAME AS NVARCHAR(200)
AS
BEGIN


	SET NOCOUNT ON;

	SELECT* FROM BookMst where BookName=@BNAME
END
GO
/****** Object:  StoredProcedure [dbo].[BOOK_SELECT_By_BID]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROCEDURE[dbo].[BOOK_SELECT_By_BID]

@bid as int
AS
BEGIN

	SET NOCOUNT ON;

SELECT* FROM BookMst where BookID=@bid
END
GO
/****** Object:  StoredProcedure [dbo].[BOOK_SELECT]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[BOOK_SELECT]

AS
BEGIN


	SET NOCOUNT ON;

	SELECT* FROM BookMst
END
GO

/****** Object:  StoredProcedure [dbo].[BOOK_INSERT]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[BOOK_INSERT]
@BNAME AS NVARCHAR(256),
	@AUTHOR AS NVARCHAR(256),
	@DETAIL AS NVARCHAR(256),
	@PRICE AS FLOAT ,
	@PUBLISHER AS NVARCHAR(256),
	@BRANCH AS NVARCHAR(256), 
	@QUANTITIES AS INT ,
    @AVAILABLEQNT AS INT ,
    @RENTQNT AS INT,
    @img as nvarchar(1000),
    @pdf as nvarchar(1000)
AS
BEGIN


	SET NOCOUNT ON;
	INSERT INTO BookMst VALUES(@BNAME, @AUTHOR , @DETAIL , @PRICE, @PUBLISHER , @BRANCH , @QUANTITIES , @AVAILABLEQNT, @RENTQNT, @img, @pdf, GETDATE() )



END
GO
/****** Object:  StoredProcedure [dbo].[BOOK_DELETE]    Script Date: 11/22/2020 09:07:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE[dbo].[BOOK_DELETE]
@BOOKID AS INT
AS
BEGIN

	SET NOCOUNT ON;
DELETE FROM BookMst WHERE BOOKID=@BOOKID



END
GO
